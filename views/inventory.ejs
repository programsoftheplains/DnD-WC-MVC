<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <h1>Inventory</h1>

    <h2><%= charInfo.characterName %></h2>

    <ul>
    <% inventory.forEach( el => { %>
            <li class='itemName' data-id='<%=el._id%>' data-path="editItem" data-a="<%=el.itemNumber%>" data-b="<%=el.itemWeight%>" data-cid="<%=el.charId%>">
                <span><%= el.itemName  %> |</span>
                <span>Quantity: <%= el.itemNumber %> |</span>
                <span>lb per item: <%= el.itemWeight %> |</span>
                <span>total lb: <%= (el.itemNumber)*(el.itemWeight) %> |</span>
                <button data-modal-target="#modal">Edit</button>
                <button class="delItem">Delete</button>
            </li>
    <% }) %>    
    </ul>


    <!--placeholder for messing around with-->
    <!--ok... now we gotta put this in the inventory.forEach-->
    <!--create a hidden form for every inv. item that passes on the item id into the data-modal-target and id's ?-->

    <!--alt idea: one form, but each Edit in the LI calls a function to open the form and pass in the el._id and other info into the form header and body-->
    

    <div class="modal" id="modal">
        <div class="modal-header">
            <div class="title">Update Item</div>
            <button data-close-button class="close-button">x</button>
        </div>
        <div class="modal-body">
            <form class="formInput" action="" method='POST'>
                <span>#</span>
                <input type="number" placeholder="Quantity" name="p1">
                <span>lbs</span>
                <input type="number" placeholder="lbs per item" name="p2">
                <input type="hidden" placeholder="cid" name="cid">
                <input type="submit">
            </form>
        </div>
    </div>
    <div id="overlay"></div>
 


    <% if (total <= charInfo.strScore*15) { %>
        <h2> Inventory Weight: <%= total %> / <%= charInfo.strScore*15 %> lbs </h2>
        <%} else{ %>
        <h2> Inventory Weight:
            <span class="encumbered"><%= total %> / <%= charInfo.strScore*15 %> lbs</span>
        </h2>
        <h3 class="encumbered">You are over-encumbered!</h3>
        <% } %>

    <h2>Make an Item!</h2>
    <form action="/inventory/createItem/<%=charId%>" method='POST'>
        <input type="text" placeholder="Enter Item Name" name='itemName'>
        <input type="text" placeholder="Description (Optional)" name="description">
        <input type="number" placeholder="Weight Per Item" name="itemWeight">
        <input type="number" placeholder="Item Quantity" name="itemNumber">
        <input type="submit">
    </form>

    <h2>Find an Item!</h2>
    <form action="/inventory/searchItem/<%charId%>" method="POST">
        <input type="text" placeholder="Enter Item Name" name='itemName'>
        <input type="number" placeholder="Item Quantity" name="itemNumber">
        <input type="submit">
    </form>

    <a href="/characters">Characters</a>
    <a href="/logout">Logout</a>



    <script src="../js/main.js"></script>
</body>
</html>